<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Document</title>
</head>
<body>
    <!-- <input id="text" type="text">
      <button id="getBtn">get</button>
      <button  id="PostBtn">Post</button>
      <ul id="display"></ul>
    <script>
        let get = document.querySelector('#getBtn');
        let post = document.querySelector('#PostBtn');
        let display = document.querySelector('#display');
        let inp = document.querySelector('#text');



        const deleteBtn = async (e)=>{
          fetch("http://localhost:3000/students/"+e.target.dataset.id, 
          {
            method:'DELETE'
          })
          e.target.parentElement.remove()

          }






          const updateBtn = async (e)=>{
          fetch("http://localhost:3000/students/"+e.target.dataset.id, 
          {
            method:'UPDATE'
          })
          console.log("A3" , e.target.dataset.id)
          }




        get.addEventListener('click', async () => {
            let respons = await fetch('http://localhost:3000/students', { method: 'GET' });
            let data = await respons.json();
            console.log("A1",data)
            data.forEach(element => {
              display.innerHTML += `
              <li>${element.firstname}
                <button data-id=${element.id} onclick="deleteBtn(event)">delete item</button>
              </li>`
            });
        })







        post.addEventListener('click',async()=>{
            let student={
              name:inp.value
            }
            console.log(student)
            let respons = await fetch('http://localhost:3000/students',
            
            {
              method:"POST",
              headers:{'Content-Type':'application/json'},
              body:JSON.stringify(student),
            });
            let data = await respons.json()
            console.log(data)
            display.innerHTML += `<li>${data.firstname}</li>`;

          })


    </script>
   -->





      <input id="text" type="text">
      <button id="getBtn">Get</button>
      <button id="PostBtn">Post</button>
      <ul id="display"></ul>
      <!-- let get = document.querySelector('#getBtn');
      let post = document.querySelector('#PostBtn');
      let display = document.querySelector('#display');
      let inp = document.querySelector('#text'); -->

      <script>
        let get = document.querySelector('#getBtn');
        let post = document.querySelector('#PostBtn');
        let display = document.querySelector('#display');
        let inp = document.querySelector('#text');


        const deleteBtn = async (e)=>{
          fetch("http://localhost:3000/students/" +e.target.dataset.id,
          {
            method:'DELETE'
          })
          e.target.parentElement.remove()
        }


        const updateBtn= async (e)=>{
          fetch("http://localhost:3000/students/" +e.target.dataset.id,
          {
            method:'UPDATE'
          })
          console.log('A3',e.target.dataset.id)
        }



        get.addEventListener('click', async ()=>{
          let respons = await fetch('http://localhost:3000/students',
           {
            method:'GET'
           })
           console.log("A1",data)
           data.forEach(Element =>{
            display.innerHTML += `<li>${element.firstname}<button data-id=${element.id} onclick="deleteBtn(event)">delete item</button></li>`
           });
        })

        post.addEventListener('click', async()=>{
          let student={
            name:inp.value
          }
          console.log(student)
          let respons = await fetch('http://localhost:3000/students',
          {
            method:"POST",
            headers:{'Content-Type':'application/json'},
            body:JSON.stringify(student),
          });
          let data = await respons.json()
          console.log(data)
          display.innerHTML +=`<li>${data.firstname}</li>`;
        })


      </script>
</body>
</html>